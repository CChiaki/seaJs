(function(factory) {
    if (typeof define === 'function') {
        define('#IDo/IDo.Core', [], factory);
    }
    else {
        factory();
    }

})(function(require) {
var $CT,$=function(){function _isStr(a){return typeof a=="string"}function _isArr(a){return a&&a.constructor===Array}function _isAO(a){return a instanceof Object&&!_isFn(a)&&(!a.nodeName||!_isNum(a.nodeType))}function _isNum(a){return typeof a=="number"}function _isEl(a){return a&&a.nodeName&&a.nodeType==1}function _isFn(a){return typeof a=="function"}function _gid(a,b){return _isStr(a)?document.getElementById(a):b?a&&a._oEQueryFlag_===null?!0:!1:a&&a._oEQueryFlag_===null?a.D:a}function _toArr(a){if(!a)return[];if(_isArr(a))return a;if(a.toArray)return a.toArray();if(_isNum(a.length)&&!_isStr(a))try{return Array.prototype.slice.call(a)}catch(b){var c=[],d=0;for(;d<a.length;d++)c.push(a[d]);return c}return[a]}function _toObj(a,b){if(typeof a=="string"){var c={};return c[a]=b,c}return a}function _toXML(a){try{var b=new ActiveXObject("Microsoft.XMLDOM"),c=b.loadXML(a);return c?b:null}catch(d){try{var b=(new DOMParser).parseFromString(a,"text/xml");return b.documentElement?b:null}catch(d){return null}}}function _extra(a,b,c){b=b||this,b=c&&b!=this?_extra(b,{}):b;for(var d in a)c&&_isAO(a[d])?_extra(a[d],{},!0):b[d]=a[d];return b}function _clone(a,b){if(typeof a=="object"){var c="[object Array]"===Object.prototype.toString.apply(a)?[]:{};for(var d in a)d!=b&&(c[d]=arguments.callee(a[d],b));return c}return typeof a=="function"?(new a).constructor:a}function _each(a,b,c,d){function e(a,b){if(c){if(c(a,b))return f(a,b),!0}else f(a,b)}function f(a,c){b&&b(a,c)}for(var g in a){var h=e(a[g],g);if(d&&h)break}}function _map(a,b){var c=_isArr(a)?[]:{};return _each(a,function(a,d){c[d]=b(a)}),c}function _pFormat(a,b,c,d){b=b||"=",c=c||"&";var e=[];if(a)for(var f in a)e.push(f+b+(_isFn(d)?d(a[f]):a[f]));return e.join(c)}function _oFormat(a){a=a.replace(/^\?/,"");var b=a.split("&"),c={};for(var d in b){var e=b[d].split("=");c[e[0]||""]=e[1]||""}return c}function _cHttp(){if(!_cHttp._cache)if(typeof XMLHttpRequest!="undefined")_cHttp._cache=XMLHttpRequest;else if(window.ActiveXObject){var a=["MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp","Microsoft.XMLHttp"];for(var b=0;b<a.length;b++)try{var c=new ActiveXObject(a[b]);_cHttp._cache=a[b]}catch(d){}}return _cHttp._cache?typeof _cHttp._cache=="string"?new ActiveXObject(_cHttp._cache):new _cHttp._cache:(IDo.error("XMLHttp create failed..."),null)}function _execScripttxt(){try{return window.execScript(txt),!0}catch(a){try{return window.eval(txt),!0}catch(a){return!1}}}function _Rest(a,b,c,d){this._url=null,this._paras=null,this._reqType=null,this._resType=null,this._blockType=null,this._XHO=null,this._restParas="",this.init.apply(this,arguments)}function scriptLoader(a,b,c,d){return this.url=a||"",this.vars=b||{},this.keepCache=!!d,this.callback=this.$onCallback=c,this.keepScript=!1,this}var _EmptyFun=function(){},_IE=window.attachEvent&&window.ActiveXObject&&!window.opera?parseInt(navigator.userAgent.toLowerCase().match(/msie ([\d.]+)/)[1]):0,rleadingWhitespace=/^\s+/,rxhtmlTag=/(<([\w:]+)[^>]*?)\/>/g,rselfClosing=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnocache=/<script|<object|<embed|<option|<style/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,fcloseTag=function(a,b,c){return rselfClosing.test(c)?a:b+"></"+c+">"},wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var _asyncIns=function(a,b){var c=null,d=null;if(typeof a!="string")c=document.createElement("div"),c.appendChild(a);else{c=document.createElement("div"),d=document.createDocumentFragment();var e=(rtagName.exec(a)||["",""])[1].toLowerCase(),f=wrapMap[e]||wrapMap._default,g=f[0];c.innerHTML=f[1]+a+f[2];while(g--)c=c.lastChild}return function(){c.firstChild?(d.appendChild(c.firstChild),arguments.callee()):b?b(d):null}(),d},_$=function(a){this.doms=[],this.length=0;if(/^#(.*)(\[)([^\]]*)\]$/.test(a)){var b=RegExp["$1"]==""?"":RegExp.$1+".",c=RegExp.$3.split(/[ ]/g);this.length=c.length;for(var d=0;d<c.length;d+=1)this.doms.push(_gid(b+c[d]))}else if(/^#(.*)(\{)([^\]]*)\}$/.test(a)){var b=RegExp["$1"]==""?"":RegExp.$1+".",c=RegExp.$3.split(/[ ]/g);this.length=c.length;for(var d=0;d<c.length;d+=1)this.doms[c[d]]=_gid(b+c[d])}else if(/^&(.*)$/.test(a))this.doms=_toArr(document.getElementsByName(RegExp.$1)),this.length=this.doms.length;else if(/^\*(.*)\[([^\]]*)\]$/.test(a)){var e=RegExp.$1?document.getElementById(RegExp.$1):document,c=RegExp.$2.split(/[ ]/g);for(var d=0;d<c.length;d+=1)this.doms=this.doms.concat(_toArr(e.getElementsByTagName(c[d])));this.length=this.doms.length}else this.doms.push(_gid(a)),this.length=this.doms.length;return this},_new_$=function(a){return new _$(a)};_extra({addIterator:function(a,b){return _$.prototype[a]=function(){var a=[].slice.call(arguments);return IDo.each(this.doms,function(c,d){b(c,d,a)}),a=null,this},_new_$},removeIterator:function(a){return delete _$.prototype[a]},extra:function(a){_extra(a,_$.prototype)}},_new_$),_$._helper={},_extra({setInputValue:function(a,b){typeof a=="string"&&(a=document.getElementsByName(a));if(a&&a[0]){var c=a[0].type||a.type;switch(c){case"radio":var d=a.length;for(var e=0;e<d;e++)if(a[e].value.toString()==b.toString()){a[e].checked=!0;break}break;case"checkbox":var d=a.length;b instanceof Array&&(b=b.join());for(var e=0;e<d;e++)a[e].checked=RegExp("\\b"+a[e].value+"\\b").test(b);break;case"select-one":if(a.tagName=="SELECT"){a.value=b;try{a.onchange()}catch(f){}}else{a[0].value=b;try{a[0].onchange()}catch(f){}}break;default:var d=a.length;for(var e=0;e<d;e++)a[e].value=b}}},getInputValue:function(a){var b="";if(a&&a[0]){var c=a[0].type||a.type;switch(c){case"radio":var d=a.length;for(var e=0;e<d;e++)if(a[e].checked){b=a[e].value;break}break;case"checkbox":var f=[],d=a.length;for(var e=0;e<d;e++)a[e].checked&&f.push(a[e].value);b=f.join();break;case"select-one":b=a.value||a[0].value;break;default:var f=[],d=a.length;for(var e=0;e<d;e++)f.push(a[e].value);b=f.join()}}return b}},_$._helper),_extra({val:function(a){return a!==undefined?(_$._helper.setInputValue(this.doms,a),this):_$._helper.getInputValue(this.doms)},vals:function(a){if(a)return this.each(this.doms,function(b,c){a[c]?b.value=a[c]:null}),this;var b=[];return this.each(this.doms,function(a,c){b[c]=a.value}),b},html:function(a){if(a)return this.each(this.doms,function(b,c){var d=typeof a=="string"?a:a[c];d&&(b.innerHTML=d)}),this;var b=[];return this.each(this.doms,function(a,c){b[c]=a.innerHTML}),this.length>1?b:b[function(a){for(var b in a.doms)return b}(this)||0]},text:function(a){if(a!==undefined)return this.each(this.doms,function(b,c){var d=typeof h=="string"?a:a[c];d&&(b.innerText=_doms.textContent=d)}),this;var b=[];return this.each(this.doms,function(a,c){b[c]=a.innerText||a.textContent}),this.length>1?b:b[function(a){for(var b in a.doms)return b}(this)||0]},get:function(a){for(var b in this.doms)break;return a=a||b,this.doms[a]},fetch:function(a){return _$(this.get(a))},addClassName:function(a){var b=new RegExp("\\b"+a+"\\b");return this.each(function(b){b.className=b.className.trim()+" "+a},function(a){return!b.test(a.className)}),this},removeClassName:function(a){var b=new RegExp("\\b"+a+"\\b\\s?","g");return this.each(function(a){a.className=a.className.replace(b,"").trim()},function(a){return b.test(a.className)}),this},oneShow:function(a,b){var c=b||"";return this.each(function(b){if(!b)return;var d=new RegExp("\\."+a+"$");b.style.display=a==b.id||d.test(b.id)?c:"none"}),this},oneSe:function(a,b,c,d){return b=b||"",c=c||"",d?this.each(function(d){if(!d)return;var e=new RegExp("\\b"+b+"\\b"),f=new RegExp("\\."+a+"$");a==d.id||f.test(d.id)?d.className.search(e)!=-1||(d.className+=" "+b):d.className.search(e)==-1||(d.className=d.className.replace(b,c).replace(/^\s+|\s+$/g,""))}):this.each(function(d){if(!d)return;var e=new RegExp("\\."+a+"$");d.className=a==d.id||e.test(d.id)?b:c}),this},clearChildNodes:function(){return this.each(function(a){_each(a.refs,function(b,c){a.refs[c]=null});while(a.lastChild)a.removeChild(a.lastChild)}),this},each:function(a,b){_each(this.doms,a,b)},getCoord:function(){var a=[],b=document.body.getBoundingClientRect?function(a){var b=a.getBoundingClientRect();return{left:b.left+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),top:b.top+Math.max(document.documentElement.scrollTop,document.body.scrollTop),width:b.width||b.offsetWidth,height:b.height||b.offsetHeight}}:function(a){return $(a,"getCoord")};return this.each(function(c,d){a[d]=b(c)}),a.length>1?a:a[function(a){for(var b in a.doms)return b}(this)||0]}},_$.prototype),Function.prototype.bind=function(){if(arguments[0]===undefined)return this;var a=_isArr(arguments[1])&&arguments[2]===undefined?arguments[1]:Array.prototype.slice.call(arguments,1),b=this,c=arguments[0];return function(){return b.apply(c||this,a.concat(Array.prototype.slice.call(arguments,0)))}};var _C=function(){};_C.prototype={$init:function(){},extra:function(a){for(var b in a)this[b]=a[b];return this}},_C.extend=function(a){var b=function(){arguments[0]!==_C&&this.$init.apply(this,arguments)},c=new this(_C),d=this.prototype,e;for(var f in a)e=a[f],_isFn(e)&&d[f]&&(e.superset=d[f]),c[f]=e;return b.prototype=c,b.extend=this.extend,b};var _H=_C.extend({allowCache:!0,$init:function(a,b,c,d){this.setDefUrl(a),this.setTransType(b),this.setDefPar(c),this.setRequestType(d),this.setNoServing(),this.opening=!1},setDefUrl:function(a){return this.defUrl=a,this},setOvTime:function(a){return this.ovTime=a,this},setTransType:function(a){return this.transType=(a||"POST").toUpperCase()=="POST"?"POST":"GET",this},setRequestType:function(a){return this.requestType=a||this.requestType||"text/xml",this},setDefPar:function(a,b){if(_isStr(a)){var c={};c[a]=b,b=!0}else c=a;return b===!0?_extra(c,this.defPar):this.defPar=c||{},this},setNoServing:function(a){return this.noServing=a||"数据请求失败，请稍后...",this},syncAsk:function(a,b,c){return this._ask(!1,a,b,c)},asyncAsk:function(a,b,c){return this._ask(!0,a,b,c),this},$chkXML:function(){return this.backData&&this.backData.documentElement?!0:{code:-1,des:this.noServing}},$chkJSON:function(){return this.backData?!0:{code:-1,des:this.noServing,msg:this.noServing}},_ask:function(a,b,c,d){if(this.opening){if(!c)return;if(c=="block")return;this._blur(),this.blurer&&clearTimeout(this.blurer)}this.opening=d&&typeof d=="number"?d:!0,this.HO=_cHttp();if(!this.HO){try{this.$noHttpRequest()}catch(e){}return}var f=this.allowCache?this.defUrl:this.defUrl+(this.defUrl.indexOf("?")>-1?"&r=":"?r=")+(new Date).getTime();if(typeof b=="string"&&b){b=b.replace(/^\?/,"");var g=b.split("&"),h={};for(var i in g){var j=g[i].split("=");h[j[0]||""]=j[1]||""}b=h,delete h}var k=_extra(b||{},this.defPar||{},!0);this.requestType=="text/json"&&k.jsback==null&&(k.jsback="()",k.fm="json");var l=_pFormat(k,"=","&",encodeURIComponent);try{this.$loading()}catch(e){}switch(this.transType){case"POST":this.HO.open("POST",f,a),this.HO.setRequestHeader("Method","POST "+f+" HTTP/1.1"),this.HO.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.HO.setRequestHeader("X-REQUESTED-WITH","XMLHttpRequest"),l=l.replace(/[\x00-\x08\x11-\x12\x14-\x20]/g,"*");break;default:l&&(f=f.indexOf("?")>-1?f+"&"+l:f+"?"+l),this.HO.open("GET",f,a),this.HO.setRequestHeader("X-REQUESTED-WITH","XMLHttpRequest"),l=null}this.paras=k,_isNum(this.ovTime)&&this.ovTime>0&&(this.blurer=setTimeout(this._blur.bind(this),this.ovTime));if(a)this.HO.onreadystatechange=this._askChange.bind(this,!0),this.HO.send(l);else return this.HO.send(l),this._askReady()},_askChange:function(){this.HO&&this.HO.readyState==4&&this._askReady()},_askReady:function(){this.blurer&&clearTimeout(this.blurer);try{this.$onComplete()}catch(e){}try{this.$onCallback()}catch(e){}if(this.HO.status==200||this.HO.status==0){switch(this.requestType){case"text/text":case"text/html":this.backData=this.HO.responseText;try{this.$onSuccessed()}catch(e){}break;case"text/xml":this.backData=_toXML(this.HO.responseText);var ret=this.$chkXML();if(ret==1)try{this.$onSuccessed()}catch(e){}else{this.backData=ret;try{this.$onFailed()}catch(e){}}break;case"text/json":try{this.backData=eval("("+this.HO.responseText+")")}catch(e){this.backData=this.HO.responseText}var ret=this.$chkJSON();if(ret==1)try{this.$onSuccessed()}catch(e){}else{this.backData=ret;try{this.$onFailed()}catch(e){}}break;case"text/javascript":case"application/javascript":case"application/x-javascript":if(_execScript(this.HO.responseText)){this.backData=null;try{this.$onSuccessed()}catch(e){}}else{this.backData=null;try{this.$onFailed()}catch(e){}}}try{this.$onFinally()}catch(e){}this._destroy();if(typeof this.opening=="number"){if(this.opening||this.timeTrick){var me=this;setTimeout(function(){me.opening=!1},this.opening||this.timeTrick)}}else this.opening=!1}else{if(this.HO.status=="402")try{__Global.noRights()}catch(e){}if(!this._blurFlag){this.backData={code:-2,status:this.HO.status,des:"服务器错误:"+this.HO.status};try{this.$onFailed()}catch(e){}this._destroy()}this.opening=!1}return this.backData},_blur:function(){this.opening=!1,this._blurFlag=!0,this.HO.abort(),this.backData=null;try{this.$onAbort()}catch(a){}this._blurFlag=null},_destroy:function(){this.HO&&setTimeout(function(){this.opening||(this.HO=null,delete this.HO)}.bind(this))}});_extra({init:function(a,b,c,d){this.setUrl(a),this.setParas(b),this.setReqType(),this.setResType(c),this.setBlockType(d)},extra:function(a){return _extra(a,this),this},setUrl:function(a){return this._url=a,this},setParas:function(a){return this._paras=typeof a=="string"?_oFormat(a):a,this},setRestParas:function(a){return this._resParas=/\{#[\S]+\}/.test(a)?a:"",this},setBlockType:function(a){return this._blockType=a,this},setReqType:function(a){a=(a||"GET").toUpperCase();if(/GET|PUT|POST|DELETE/.test(a))this._reqType=a;else throw new Error("IDo::Rest->不支持该请求方法["+a+"]");return this},setResType:function(a){return a=(a||"text/json").toLowerCase(),this._resType=a,this},getAsk:function(a,b,c){this.setRestParas(b),this.ask(a,"GET",c)},putAsk:function(a,b,c){this.setRestParas(b),this.ask(a,"PUT",c)},postAsk:function(a,b,c){this.setRestParas(b),this.ask(a,"POST",c)},deleteAsk:function(a,b,c){this.setRestParas(b),this.ask(a,"DELETE",c)},ask:function(a,b,c,d){this.setParas(a),this.setReqType(b),this.setBlockType(d),this.$onLoading();var e=c=="sync"?(this._doRequest(!1),null):this._doRequest(!0);return e},_doRequest:function(a){var b=_Rest.getParasStr(this._paras).replace(/[\x00-\x08\x11-\x12\x14-\x20]/g,"*"),c=_Rest.getReqUrl(this._url,this._resParas,b,"rest");this._XHO||(this._XHO=_cHttp()),this._XHO.open(this._reqType,c,a);switch(this._reqType){case"POST":this._XHO.setRequestHeader("Method","POST "+c+" HTTP/1.1"),this._XHO.setRequestHeader("Content-Type","application/x-www-form-urlencoded");break;case"PUT":this._XHO.setRequestHeader("Method","PUT "+c+" HTTP/1.1"),this._XHO.setRequestHeader("Content-Type","application/x-www-form-urlencoded");break;case"DELETE":this._XHO.setRequestHeader("Method","DELETE "+c+" HTTP/1.1"),this._XHO.setRequestHeader("Content-Type","application/x-www-form-urlencoded");break;default:}if(a)this._XHO.onreadystatechange=this._askChange.bind(this,!0),this._XHO.send(b);else return this._XHO.send(b),this.$askReady()},_askChange:function(){this._XHO&&this._XHO.readyState==4&&this.$askReady()},$askReady:function(){this.$onCallback();if(this._XHO.status==200||this._XHO.status==0){switch(this._resType){case"text/text":case"text/html":this.backData=this._XHO.responseText,this.$onSuccessed();break;case"text/xml":this.backData=_toXML(this._XHO.responseText);var ret=this.$chkXML();ret==1?this.$onSuccessed():(this.backData=ret,this.$onFailed());break;case"text/json":try{this.backData=eval("("+this._XHO.responseText+")")}catch(e){this.backData=this._XHO.responseText}var ret=this.$chkJSON();ret==1?this.$onSuccessed():(this.backData=ret,this.$onFailed());break;case"text/javascript":case"application/javascript":case"application/x-javascript":_execScript(this._XHO.responseText)?(this.backData=null,this.$onSuccessed()):(this.backData=null,this.$onFailed())}this.$onFinally(),this._destroy()}else{if(this._XHO.status=="402")try{__Global.noRights()}catch(e){}this._blurFlag||(this.backData={code:-2,status:this._XHO.status,des:"服务器错误:"+this._XHO.status},this.$onFailed(),this._destroy()),this.opening=!1}return this.backData},$chkXML:function(){return this.backData&&this.backData.documentElement?!0:{code:-1,des:this.noServing}},$chkJSON:function(){return this.backData?!0:{code:-1,des:this.noServing,msg:this.noServing}},_destroy:function(){delete this._XHO},$onLoading:_EmptyFun,$onCallback:_EmptyFun,$onSuccessed:_EmptyFun,$onFailed:_EmptyFun,$onFinally:_EmptyFun,$onAbort:_EmptyFun,abort:function(){this._XHO&&(this._XHO.abort(),this._destroy())}},_Rest.prototype),_extra({getReqUrl:function(a,b,c,d){a=[a,b].join("/").replace(/\/+/g,"/").replace("http:/","http://");var e=d=="rest"?/\{#[\S]+\}/.test(a)?a.htmlFormat(_oFormat(c)):[a,c].join("/").replace(/\/+/g,"/").replace("http:/","http://"):a.indexOf("?")>-1?a+"&"+c:e+"?"+c;return e},getParasStr:function(a){return _pFormat(a,"=","&",encodeURIComponent)}},_Rest),scriptLoader.prototype={isIE:/MSIE/i.test(navigator.userAgent),extra:function(a){for(var b in a)this[b]=a[b];return this},getPostVars:function(a){var b=[];for(var c in a)b.push(c+"="+a[c]);var d=b.join("&")+(this.keepCache?"":"&t="+(new Date).getTime()),e=(this.url&&this.url.indexOf("?")>-1?"&":"?")+d;return e.replace(/[&?]$/,"").replace(/&&/,"&")},ask:function(a,b){var c=this.vars;if(a)for(var d in a)c[d]=a[d];var e="",f=this.url;if(b){var g=[];for(var d in b)g.push(b[d]);e="/"+g.join("/"),f=this.url.replace(/\?/,e+"?")}var h=f+this.getPostVars(c),i=document.createElement("script");i.type="text/javascript";var j=this.callback||this.$onCallback,k=this;this.isIE?i.onreadystatechange=function(){if(i.readyState=="complete"||i.readyState=="loaded"){i.onreadystatechange=null,j&&j();try{k.$onFinally()}catch(a){}if(!k.keepScript)try{i.parentNode.removeChild(i)}catch(b){}k=null}}:i.onload=function(){j&&j();try{k.$onFinally()}catch(a){}k.keepScript||i.parentNode.removeChild(i),k=null},i.onerror=function(){k.$onFailed?k.$onFailed():IDo.error("scriptLoader 请求出错！",k.url);try{k.$onFinally()}catch(a){}return k=null,!1},i.src=h,document.getElementsByTagName("head")[0].appendChild(i),this.script=i},setOvTime:function(a){return this.ovTime=a,this}};var _T={cashe:{},names:{className:"class"},exs:function(a){var b=_isArr(this)?[]:{};for(var c in this)_isEl(this[c])?b[c]=_Ex[a].apply(this[c],Array.prototype.slice.call(arguments,1)):_isArr(this[c])&&(b[c]=_Exs[a].apply(this[c],Array.prototype.slice.call(arguments,1)));return b},ac:function(a,b,c){var d=_isArr(this)?[]:{};for(var e in this)_isEl(this[e])?_isStr(b)&&_isAO(c)?d[e]=_Ex[a].call(this[e],b,c[e]):d[e]=_Ex[a].call(this[e],b,c):_isArr(this[e])&&(d[e]=_Exs[a].call(this[e],b,c));return d},ht:function(a,b,c){var d=_isArr(this)?[]:{},e=[],f=_isAO(b),g=_isAO(c);for(var h in this)_isEl(this[h])?(e[0]=f?b[h]:b,e[1]=g?c[h]:c,d[h]=_Ex[a].apply(this[h],e)):_isArr(this[h])&&(d[h]=_Exs[a].call(this[h],b));return d},bind:function(a,b,c){return function(){var d=_T[b].apply(_gid(this),[a].concat(Array.prototype.slice.call(arguments,0)));if(_gid(this,!0)){if(c===!0)return d;if(c===!1)return this;for(var e in d)return this.D[e]==d[e]?this:d}return d}}},_Ex={attr:function(a,b){var c=_gid(this);if(b===undefined&&_isStr(a))return c[a]===undefined?c.getAttribute(a):c[a];if(_isStr(a)){var d={};d[a]=b}else var d=a;for(var e in d){if(e=="style"){_Ex.css.call(c,d[e]);continue}var f=_IE?e:_T.names[e]||e,g=d[e];_isFn(g)?c[f]=g:g===!1||g===null||g===undefined?c.removeAttribute(f):g===!0?c.setAttribute(f,f):f=="className"||f=="innerHTML"?c[f]=g:f=="ref"?IDo.refCache.push({_name:g,_dom:c}):c.setAttribute(f,g)}return this},css:function(a,b){var c=_gid(this);if(b===undefined&&_isStr(a))return c.style[a.replace(/\-(\w)/g,function(){return arguments[1].toUpperCase()})];if(_isStr(a)){var d={};d[a]=b}else var d=a;for(var e in d)try{c.style[e.replace(/\-(\w)/g,function(){return arguments[1].toUpperCase()})]=d[e]}catch(f){}return this},html:function(a){var b=_gid(this);return a===undefined?b.innerHTML:(b.innerHTML=a,this)},text:function(a){var b=_gid(this);return a===undefined?b.textContent||b.innerText:(_IE?b.innerText=a:b.textContent=a,this)},clear:function(){var a=_gid(this);while(a.childNodes.length)a.removeChild(a.lastChild);return this},getCoord:function(){var a=0,b=0,c=_gid(this),d=c.offsetWidth,e=c.offsetHeight;while(c.offsetParent)a+=c.offsetLeft,b+=c.offsetTop,a-=c.scrollLeft,b-=c.scrollTop,c=c.offsetParent;return a+=c.offsetLeft,b+=c.offsetTop,{left:a,top:b,width:d,height:e}},append:function(a){var b=_gid(this);if(_isStr(a)||a&&a.nodeName&&_isNum(a.nodeType))a=_gid(a),a&&b.appendChild(a);else if(_isAO(a))for(var c in a)_Ex.append.call(b,a[c]);return this},appendTo:function(a){var b=_gid(this);return a=_gid(a),_isEl(a)&&_Ex.append.call(a,b),this},addEvent:function(a,b){var c=_gid(this);return c.addEventListener?c.addEventListener(a,b,!1):c.attachEvent?c.attachEvent("on"+a,b):c["on"+a]=b,this},removeEvent:function(a,b){var c=_gid(this);return c.removeEventListener?c.removeEventListener(a,b,!1):c.detachEvent?c.detachEvent("on"+a,b):c["on"+a]=!1,this},setHover:function(a,b){b=b||"",a=a||"";var c=_gid(this);return _Ex.addEvent.call(c,"mouseover",function(b){_isStr(a)?c.className=a:_Ex.css.call(c,a)}),_Ex.addEvent.call(c,"mouseout",function(a){_isStr(b)?c.className=b:_Ex.css.call(c,b)}),this},setIptCue:function(a){var b=_gid(this);return b.value=a,_Ex.addEvent.call(b,"focus",function(){b.value.replace(/^\s+|\s+$/g,"")==a&&(b.value="")}),_Ex.addEvent.call(b,"blur",function(){b.value.replace(/^\s+|\s+$/g,"")==""&&(b.value=a)}),this},setEnterDo:function(a,b){var c=_gid(this);return _Ex.addEvent.call(c,"keyup",function(c){c.keyCode*1==13&&(!b||c.ctrlKey)&&(_isFn(a)?a():_Ex.doEvent.call(_gid(a),_isStr(b)?b:"click"))}),this},rollback:function(a){var b=_gid(this);return a=a||a==""?a:"block",b.style.display=="none"?b.style.display=a:b.style.display="none",this},doEvent:function(a){a=a||"click";var b=_gid(this);if(document.createEvent){var c=document.createEvent("MouseEvents");c.initEvent(a,!0,!1),b.dispatchEvent(c)}else document.createEventObject&&b.fireEvent("on"+a);return this}},_Exs={attr:_T.bind("attr","ac"),css:_T.bind("css","ac"),html:_T.bind("html","ht"),text:_T.bind("text","ht"),clear:_T.bind("clear","exs",!1),getCoord:_T.bind("getCoord","exs",!0),appendTo:_T.bind("appendTo","exs",!1),addEvent:_T.bind("addEvent","ht",!1),removeEvent:_T.bind("removeEvent","ht",!1),setHover:_T.bind("setHover","exs",!1),setIptCue:_T.bind("setIptCue","ht",!1),setEnterDo:_T.bind("setEnterDo","ht",!1),rollback:_T.bind("rollback","exs",!1),doEvent:_T.bind("doEvent","ht",!1),oneShow:function(a,b){b=b||"";var c=_gid(this);for(var d in c)_isEl(c[d])&&(d==a||c[d]==a?c[d].style.display=b:c[d].style.display="none");return c},oneSe:function(a,b,c){if(!b)return this;c=c||"";var d=_gid(this);for(var e in d)if(_isEl(d[e])){var f=e==a||d[e]==a?b:_isAO(c)?c[e]||"":c;_isStr(f)?d[e].className=f:_Ex.css.call(d[e],f)}return this},radioValue:function(){var a=_gid(this);for(var b in a)if(_isEl(a[b])&&a[b].checked)return a[b].value;return null}},_oEx=_C.extend(_extra(_Ex,{$init:function(a){this.D=a,this._oEQueryFlag_=null},get:function(){return this.D}})),_oExs=_C.extend(_extra(_Exs,{$init:function(a){this.D=a,this._oEQueryFlag_=null},get:function(a,b){return a===undefined?this.D:this.D[a]?b?new _oEx(this.D[a]):this.D[a]:null}})),_Toolkit={log:function(a,b){try{console.log([].slice.apply(arguments).join(" -> "))}catch(c){}},error:function(a,b){try{console.error([].slice.apply(arguments).join(" -> "))}catch(c){}},info:function(a,b){try{console.info([].slice.apply(arguments).join(" -> "))}catch(c){}}};try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}return IDo=_extra({version:"1.0.0 Beta",get:function(s){return eval("_"+s)},Class:_C,HitUp:_H,Ajax:_H,Rest:_Rest,scriptLoader:scriptLoader,extra:_extra,clone:_clone,each:_each,map:_map,asyncIns:_asyncIns,Fn:{},ready:function(a){return document.addEventListener?document.addEventListener("DOMContentLoaded",a,!1):document.attachEvent("onreadystatechange",function(){if(document.readyState=="complete"||document.readyState=="loaded")document.detachEvent("onreadystatechange",arguments.callee),a()}),this},loadXML:function(a){return _toXML(a)},setEx:function(a,b){a=_toObj(a,b);for(var c in a)_oEx.prototype[c]=_Ex[c]=a[c];return this},setExs:function(a,b){a=_toObj(a,b);for(var c in a)_oExs.prototype[c]=_Exs[c]=a[c];return this},CN:function(a,b,c,d){if(b=="text")var e=document.createTextNode(a);else{b=b||{},a=a.toLowerCase();if(_IE&&_IE<=8&&(b.name||b.checked||b.hidefocus)){a="<"+a,b.name&&(a=a+' name="'+b.name+'"',delete b.name),b.checked&&(a+=' checked="checked"',delete b.checked),b.hidefocus&&(a+=' hidefocus="true"',delete b.hidefocus),a+=" >";var e=document.createElement(a)}else{_T.cashe[a]||(_T.cashe[a]=document.createElement(a));var e=_T.cashe[a].cloneNode(!1)}if(_isStr(c)||_isNum(c))e.innerHTML=c;_Ex.attr.call(e,b)}return d===!0?new _oEx(e):(d&&d.push?d.push(e):(_isEl(d)||_isStr(d))&&_Ex.appendTo.call(e,d),e)},refCache:[],CNs:function(a,b){var c=!arguments.callee.caller||arguments.callee.caller!=arguments.callee;if(_isStr(a[0])){var d=IDo.CN(a[0],a[1],a[2],a[3]&&_isArr(a[3])?a[3]:undefined);_isArr(a[2])&&_Ex.append.call(d,IDo.CNs(a[2]))}else if(_isArr(a[0])){var d=[];for(var e=0;e<a.length;e+=1)d.push(IDo.CNs(a[e]))}if(b===!0)return new _oExs(d);(_isStr(b)||_isEl(b))&&_Ex.appendTo.call(d,b);if(c)while(IDo.refCache.length){d.refs||(d.refs={});var f=IDo.refCache.shift();d.refs[f._name]=f._dom}return d},$:_new_$,log:_Toolkit.log,error:_Toolkit.error,info:_Toolkit.info,Empty:_EmptyFun,getMsCoord:function(a){a=a||window.event;if(a.pageX||a.pageY){var b=a.pageX;c=a.pageY}else var b=a.clientX+(document.body.scrollLeft||document.documentElement.scrollLeft)-(document.body.clientLeft||document.documentElement.clientLeft),c=a.clientY+(document.body.scrollTop||document.documentElement.scrollTop)-(document.body.clientTop||document.documentElement.clientTop);return{x:b,y:c,left:b,top:c}}},function(a,b){if(!a)return a;if(_isStr(a)){var c=_gid(a);if(c)a=c;else if(/^#(.*)(\[)([^\]]*)\]$/.test(a)){var d=RegExp["$1"]==""?"":RegExp.$1+".",e=RegExp.$3.split(/[ ]/g);a=[];for(var f=0;f<e.length;f+=1)a.push(_gid(d+e[f]))}else if(/^#(.*)(\{)([^\]]*)\}$/.test(a)){var d=RegExp["$1"]==""?"":RegExp.$1+".",e=RegExp.$3.split(/[ ]/g);a={};for(var f=0;f<e.length;f+=1)a[e[f]]=_gid(d+e[f])}else if(/^&(.*)$/.test(a))a=_toArr(document.getElementsByName(RegExp.$1));else{if(!/^\*(.*)\[([^\]]*)\]$/.test(a))return null;var g=RegExp.$1?document.getElementById(RegExp.$1):document,e=RegExp.$2.split(/[ ]/g);a=[];for(var f=0;f<e.length;f+=1)a=a.concat(_toArr(g.getElementsByTagName(e[f])))}}return b===!0?new(_isEl(a)?_oEx:_oExs)(a):_isStr(b)||_isFn(b)?(_isFn(b)?b:(_isEl(a)||window==a||document==a?_Ex:_Exs)[b]).apply(a,Array.prototype.slice.call(arguments,2)):a})}();Date.prototype.format=function(a){var b;return a=a||"YYYY-MM-DD",b=a.replace(/YYYY/g,this.getFullYear()),b=b.replace(/YY/g,String(this.getYear()).slice(-2)),b=b.replace(/MM/g,("0"+String(this.getMonth()+1)).slice(-2)),b=b.replace(/M/g,this.getMonth()+1),b=b.replace(/DD/g,("0"+String(this.getDate())).slice(-2)),b=b.replace(/D/g,this.getDate()),b=b.replace(/hh/g,("0"+String(this.getHours())).slice(-2)),b=b.replace(/h/g,this.getHours()),b=b.replace(/mm/g,("0"+String(this.getMinutes())).slice(-2)),b=b.replace(/m/g,this.getMinutes()),b=b.replace(/ss/g,("0"+String(this.getSeconds())).slice(-2)),b=b.replace(/s/g,this.getSeconds()),b},String.prototype.uniLength=function(){return this.replace(/[^\x00-\xff]/g,"**").length},String.prototype.uniSubstr=function(a,b){var e,g,c=0,d=a,f="";while(c<b){e=this.substr(d,1);if(e=="")break;f+=e,g=e.uniLength(),c+=g,d+=1}return f},String.prototype.uniLeft=function(a,b){return b||(b=""),this.uniLength()>a?this.uniSubstr(0,a-b.uniLength())+b:String(this)},String.prototype.oReplace=function(a,b){var c,d;if(!a)return this;a=IDo.get("toArr")(a),b=IDo.get("toArr")(b),c=this;for(d=0;d<a.length;d+=1)c=c.replace(a[d],b[d]);return c},String.prototype.htmlEncode=function(a,b){var c=this.oReplace([/&/g,/</g,/>/g,/\"/g,/\'/g],["&amp;","&lt;","&gt;","&quot;","&acute;"]);return c.oReplace(a,b)},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.format=function(){var a=arguments;return this.replace(/\{\d+\}/g,function(b){var c=b.replace(/[{}]/g,"");return a[c]})},String.prototype.htmlFormat=function(a){var b=this;return IDo.isIE||(b=unescape(b)),b.replace(/\{([#@])([\w\$\.]+)\}/g,function(b,c,d){var e;try{e=a[d],e==null&&(e="#"+d)}catch(f){}return!e&&!$.isNum(e)&&(e=""),c=="@"&&(e=e.replace(/\\/g,"\\\\").replace(/\'/g,"\\'")),e})},String.prototype.padLeft=function(a,b){return b||(b=" "),this._PadHelper(a,b,!1)},String.prototype.padRight=function(a,b){return b||(b=" "),this._PadHelper(a,b,!0)},String.prototype._PadHelper=function(a,b,c){var d;if(this.length<a){d=new String;for(i=1;i<=a-this.length;i++)d+=b;return c?this+d:d+this}return this},Function.prototype.extend=function(a){return this.prototype=new a,this.prototype.constructor=this,this},IDo.HitUp.prototype.$chkXML=IDo.Rest.prototype.$chkXML=function(){var a,b,c,d,e;if(this.backData&&this.backData.documentElement){a=this.backData.documentElement;if(!a.getAttribute("error")||a.getAttribute("error")=="0")return!0;b=a.childNodes,c=this.noServing,d=-1;for(e=0;e<b.length;e+=1)if(IDo.get("isEl")(b[e])){c=b[e].getAttribute("des")||this.noServing,d=b[e].getAttribute("code")||d;break}if(this[this.backData.code])try{this[this.backData.code]()}catch(f){}return{code:d,des:c}}return{code:-1,des:this.noServing}},IDo.HitUp.prototype.$chkJSON=IDo.Rest.prototype.$chkJSON=function(){if(this.backData&&typeof this.backData=="object"&&(!this.backData.code||this.backData.code*1==0))return!0;if(this[this.backData.code])try{this[this.backData.code]()}catch(a){}return this.backData?{code:this.backData.code||-1,des:this.backData.msg||this.noServing}:{code:-1,des:this.noServing}},IDo.Fn.xml2EnumObj=function(a,b){var c,d,e,f,g,h,i;if(!a)return{};if(b===!0||b===undefined){c=(b?a.selectNodes(".//@*"):a.attributes)||[],d=(b?a.selectNodes(".//*"):a.childNodes)||[],e={};for(f=0;f<c.length;f++)g=c[f],e[g.nodeName]=g.nodeValue;for(f=0;f<d.length;f++)h=d[f],e[h.nodeName]=h.text;return e}if(typeof b=="string")return a.selectSingleNode(b).nodeValue;e={};for(i in b)try{e[i]=a.selectSingleNode(b[i]).nodeValue}catch(j){e[i]=""}return e};try{XN}catch(e){XN={}}$.extra({doMain:function(){var a=document.domain.split(/\./g);return a.length>1&&a.shift(),a.join(".")}(),toPath:function(a,b,c){var e,f,g,h,d="";c=FWK.isNum(c)?c:1e3,b=FWK.isNum(b)?b:4,e=1;for(f=1;f<b;f++)e*=c;g=parseInt(a);for(f=0;f<b;f++)b!=f+1?(h=Math.floor(g/e),g%=e,d+="/"+h,e/=c):d+="/"+a;return d},getCookieQuery:function(a){var b,c,d,e;if(FWK.isStr(a))return b="(?:; )?"+a+"=([^;]*);?",c=new RegExp(b),c.test(document.cookie)?decodeURIComponent(RegExp.$1):null;if(FWK.isArr(a)){for(d=0,e=a.lenght;d<e;d+=1)a[d]=XN.getCookieQuery(a[d]);return a}return a},getCookie:function(a){return this.getCookieQuery(a)},setCookie:function(a,b,c,d,e,f){var h,g=a+"="+encodeURIComponent(b);c&&(typeof c=="string"?(h=new Date,h.setTime((new Date).getTime()+parseInt(c)),c=h.toGMTString()):c=c.toGMTString(),g+="; expires="+c),d&&(g+="; path="+d),e&&(g+="; domain="+e),f&&(g+="; secure"),document.cookie=g},removeCookie:function(a,b,c,d){this.setCookie(a,"",new Date(0),b,c,d)},getQuery:function(a){var b,c,e,f;if(FWK.isStr(a)){b="[?& ]+"+a+"=([^(&)]*)[&]?",c=new RegExp(b);if(!c.test(document.location.search))return"";try{return decodeURIComponent(RegExp.$1)}catch(d){return RegExp.$1}}else if(FWK.isArr(a)){for(e=0,f=a.length;e<f;e+=1)a[e]=XN.getQuery(a[e]);return a}},toArray:IDo.get("toArr")},XN);try{FWK}catch(e){FWK={}}IDo.extra({Class:IDo.Class,isStr:IDo.get("isStr"),isIE:IDo.get("IE"),isIE6:IDo.get("IE")==6,isArr:IDo.get("isArr"),isObj:function(a){return IDo.get("isAO")(a)&&!IDo.get("isArr")(a)},isFun:IDo.get("isFn"),isNum:IDo.get("isNum"),extra:IDo.extra,createElement:IDo.CN,createXElement:IDo.CNs,addEvent:function(a,b,c){IDo(IDo.get("gid")(a),"addEvent",b,c)},removeEvent:function(a,b,c){IDo(IDo.get("gid")(a),"removeEvent",b,c)},Util:{HitUp:IDo.HitUp,AjaxList:(new IDo.HitUp).extra({$chkXML:function(){return!0},open:function(a,b,c,d,e){this.opening?this.list.push(arguments):(this.$init(a,b,{},"text/xml"),this.setOvTime(e),this.callBack=d,this.asyncAsk(c))},$onSuccessed:function(){try{this.callBack(this.backData)}catch(a){}this.goNext()},$onFailed:function(){try{this.callBack(!1)}catch(a){}this.goNext()},goNext:function(){this.list.length&&this.open.apply(this,this.list.shift())},$onAbort:function(){try{this.callBack(!1)}catch(a){}this.goNext()},list:[]}),createElement:function(a,b,c,d){var e=IDo.CNs([a,b,c]);return d&&d.appendChild(e),e}},Element:{addChild:IDo.get("Ex").append,clearChild:IDo.get("Ex").clear},xml2EnumObj:IDo.Fn.xml2EnumObj,json2str:function(a,b){var d,c=[];if(a===undefined||a===null)return"null";if(typeof a=="string")return'"'+a.replace(/([\'\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"';if(typeof a=="object"){if(!a.sort){for(d in a)c.push((b?'"'+d+'":':d+":")+this.json2str(a[d],b));IDo.get("IE")&&!/^\n?function\s*toString\(\)\s*\{\n?\s*\[native code\]\n?\s*\}\n?\s*$/.test(a.toString)&&c.push("toString:"+a.toString.toString()),c="{"+c.join()+"}"}else{for(d=0;d<a.length;d++)c.push(this.json2str(a[d],b));c="["+c.join()+"]"}return c}return a.toString()}},FWK),IDo.Fn.json2str=FWK.json2str,$CT=function(a){return document.createTextNode(a)},IDo.extra(XN,$),IDo.extra(FWK,$),FWK.Http={getQuery:XN.getQuery,Ajax:IDo.HitUp.extend({$init:function(a,b){arguments.callee.superset.call(this,null,a,null,b)},asyncAsk:function(a,b,c){this.setDefUrl(a),this.setOvTime(c),arguments.callee.superset.call(this,b)},syncAsk:function(a,b,c){return this.setDefUrl(a),this.setOvTime(c),arguments.callee.superset.call(this,b)},$onSuccessed:function(){var a=this[0]?0:"onSuccessed";try{this[a](this.backData)}catch(b){}},$onFailed:function(){var a=this.backData||{des:"未知错误，请稍后再试...",code:"def"},b=this[a.code]?a.code:this.def?"def":"onFailed";try{this[b](a.des,a.code)}catch(c){}}})},FWK.extend=function(){var a;for(a in arguments[1])arguments[0][a]=arguments[1][a]},FWK.xmlObj=function(a,b){var c,d,e,f;b=b===undefined?"$":b||"";if(FWK.isNum(a.length)){c={};for(d=0;d<a.length;d+=1)FWK.isArr(c[a[d].nodeName])?c[a[d].nodeName].push(FWK.xmlObj(a[d],b)):c[a[d].nodeName]?c[a[d].nodeName]=[c[a[d].nodeName],FWK.xmlObj(a[d],b)]:c[a[d].nodeName]=FWK.xmlObj(a[d],b);return c}a=a.documentElement||a,e=a.selectNodes("*"),f=a.selectNodes("@*"),c={};for(j=0;j<f.length;j+=1)c[b+f[j].nodeName]=f[j].nodeValue;return e.length==0?a.text?c[b+"_"]=a.text:c[b+"_"]="":FWK.extend(c,FWK.xmlObj(e,b)),c},FWK.loadXML=$.loadXML,XN.htmlFormat=function(_htmlStr,_obj){return FWK.isIE||(_htmlStr=unescape(_htmlStr)),_htmlStr.replace(/\{([#@])([\w\$\.]+)\}/g,function($0,$1,$2){var rv;try{rv=eval("_obj."+$2)}catch(e){}return!rv&&!FWK.isNum(rv)&&(rv=""),$1=="@"&&(rv=rv.replace(/\\/g,"\\\\").replace(/\'/g,"\\'")),rv})},XN.setCookie=function(a,b,c,d,e,f){var g=a+"="+encodeURIComponent(b);c&&(g+="; expires="+c.toGMTString()),d&&(g+="; path="+d),e&&(g+="; domain="+e),f&&(g+="; secure"),document.cookie=g},XN.removeCookie=function(a,b,c){var d=a+"=; expires="+(new Date(0)).toGMTString();b&&(d+="; path="+b),c&&(d+="; domain="+c)},XN.checkResponse=function(a){return IDo.HitUp.prototype.$chkXML.call({backData:a})},XN.toText=function(a){return a.oReplace([/</g,/>/g,/\n/g],["&lt;","&gt;","<br />"])},XN.escapeFace=function(a){return a.replace(/\[em:(\d*)\]/ig,'<img src="http://www.'+XN.doMain+'/homespace/tmp/manage/style/images/facing/$1.gif" border="0" />')},!IDo.get("IE")&&navigator.userAgent.indexOf("Opera")<0&&(XMLDocument.prototype.__proto__.__defineGetter__("xml",function(){var b;try{return(new XMLSerializer).serializeToString(this)}catch(a){return b=document.createElement("div"),b.appendChild(this.cloneNode(!0)),b.innerHTML}}),Element.prototype.__proto__.__defineGetter__("xml",function(){var b;try{return(new XMLSerializer).serializeToString(this)}catch(a){return b=document.createElement("div"),b.appendChild(this.cloneNode(!0)),b.innerHTML}}),XMLDocument.prototype.__proto__.__defineGetter__("text",function(){return this.firstChild.textContent}),Element.prototype.__proto__.__defineGetter__("text",function(){return this.textContent}),document.implementation&&document.implementation.createDocument&&(document.implementation.hasFeature("XPath","3.0")&&(XMLDocument.prototype.selectNodes=function(a,b){var c,d,e,f;b||(b=this),c=this.createNSResolver(this.documentElement),d=this.evaluate(a,b,c,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),e=[];for(f=0;f<d.snapshotLength;f++)e[f]=d.snapshotItem(f);return e},Element.prototype.selectNodes=function(a){if(this.ownerDocument.selectNodes)return this.ownerDocument.selectNodes(a,this);throw"For XML Elements Only"}),document.implementation.hasFeature("XPath","3.0")&&(XMLDocument.prototype.selectSingleNode=function(a,b){var c;return b||(b=this),c=this.selectNodes(a,b),c.length>0?c[0]:null},Element.prototype.selectSingleNode=function(a){if(this.ownerDocument.selectSingleNode)return this.ownerDocument.selectSingleNode(a,this);throw"For XML Elements Only"})))
    if (require) return $;
});